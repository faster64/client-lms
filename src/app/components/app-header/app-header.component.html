<div class="app-header-cpn">
  <div class="bg-line"></div>
  <div class="nav-line">
    <div class="nav-left">
      <a class="logo" [href]="Routing.HOME.path"></a>

      <ng-template [ngTemplateOutlet]="nav"></ng-template>
    </div>


    <div class="nav-right unauthenticated"
      *ngIf="AuthService.CurrentStatus != AuthStatus.LoggedIn && AuthService.CurrentStatus != AuthStatus.Unknown">
      <a class="cart" [routerLink]="Routing.CART.path">
        <span class="item-count" *ngIf="SharedService.CartItems.length > 0">
          {{SharedService.CartItems.length > 9 ? '9+' : SharedService.CartItems.length}}
        </span>
      </a>

      <div class="wrap">
        <div class="search" (click)="openSearch()" *ngIf="SharedService.AtHome"></div>
        <div class="seperate-line" *ngIf="SharedService.AtHome"></div>
        <a class="login" [routerLink]="Routing.LOGIN.path">
          {{'header.features.login' | translate}}
        </a>
        <div class="slash">/</div>
        <a class="register" [routerLink]="Routing.REGISTER.path">
          {{'header.features.register' | translate}}
        </a>
      </div>

    </div>

    <div class="nav-right authenticated" *ngIf="AuthService.CurrentStatus == AuthStatus.LoggedIn"
      (click)="opened = false">
      <div class="search" (click)="openSearch()" *ngIf="SharedService.AtHome"></div>

      <a class="cart" [routerLink]="Routing.CART.path">
        <span class="item-count" *ngIf="SharedService.CartItems.length > 0">
          {{SharedService.CartItems.length > 9 ? '9+' : SharedService.CartItems.length}}
        </span>
      </a>

      <app-account-box></app-account-box>
    </div>
  </div>

  <div class="on-small unselectable" [ngClass]="opened ? 'opened' : ''">
    <div class="wrapper">
      <a class="logo" [href]="Routing.HOME.path" (click)="opened = false"></a>

      <div class="right">
        <div class="search bg-contain" (click)="openSearch()" *ngIf="SharedService.AtHome && !opened"></div>
        <div class="menu bg-contain" (click)="opened = true"></div>
        <div class="close bg-contain" (click)="opened = false"></div>
      </div>
    </div>

    <div class="nav-wrapper">
      <div class="nav">

        <ng-template [ngTemplateOutlet]="nav"></ng-template>

      </div>
    </div>

  </div>
</div>

<div class="search-course-mode" [ngClass]="SharedService.OpenSearch ? 'open-search' : ''"
  (click)="SharedService.OpenSearch = false">
  <div class="search-wrapper" (click)="stopEvent($event)">
    <dx-text-box #searchInstance mode="search" height="56" width="100%" placeholder="Nhập từ khóa tìm kiếm"
      [showClearButton]="false" [(value)]="searchKey" (onEnterKey)="search()">
    </dx-text-box>
  </div>

  <div class="close-btn bg-contain" (click)="SharedService.OpenSearch = false"></div>
</div>

<ng-template #nav>
  <a class="nav-item small-item" (click)="openSearch($event)" href="#" *ngIf="SharedService.AtHome">
    <div class="text">Tìm kiếm</div>
  </a>

  <a class="nav-item" [routerLink]="Routing.HOME.path" [ngClass]="Routing.HOME.path == path ? 'selected' : ''"
    (click)="opened = false">
    <div class="text">{{'header.navs.home' | translate}}</div>
    <div class="under-line"></div>
  </a>

  <!-- <a class="nav-item" [routerLink]="Routing.CONTACT.path" [ngClass]="Routing.CONTACT.path == path ? 'selected' : ''"
    >
    <div class="text">{{'header.navs.contact' | translate}}</div>
    <div class="under-line"></div>
  </a> -->

  <a class="nav-item" [routerLink]="Routing.GUIDE.path" [ngClass]="Routing.GUIDE.path == path ? 'selected' : ''"
    (click)="opened = false">
    <div class="text">{{'header.navs.guide' | translate}}</div>
    <div class="under-line"></div>
  </a>

  <a class="nav-item small-item" [routerLink]="Routing.CART.path"
    [ngClass]="Routing.CART.path == path ? 'selected' : ''" (click)="opened = false">
    <div class="text">Giỏ hàng (<strong>{{SharedService.CartItems.length}}</strong>)</div>
    <div class="under-line"></div>
  </a>

  <a class="nav-item" [routerLink]="Routing.MY_COURES.path" [ngClass]="Routing.MY_COURES.path == path ? 'selected' : ''"
    *ngIf="AuthService.CurrentStatus == AuthStatus.LoggedIn" (click)="opened = false">
    <div class="text">{{'header.navs.my_courses' | translate}}</div>
    <div class="under-line"></div>
  </a>

  <a class="nav-item" [routerLink]="Routing.CMS.path" [ngClass]="Routing.CMS.path == path ? 'selected' : ''"
    *ngIf="AuthService.CurrentStatus == AuthStatus.LoggedIn && hasCms" (click)="opened = false">
    <div class="text">CMS</div>
    <div class="under-line"></div>
  </a>

  <a class="nav-item small-item" [routerLink]="Routing.PERSONAL_INFORMATION.path"
    [ngClass]="Routing.PERSONAL_INFORMATION.path == path ? 'selected' : ''"
    *ngIf="AuthService.CurrentStatus == AuthStatus.LoggedIn" (click)="opened = false">
    <div class="text">Thông tin cá nhân</div>
    <div class="under-line"></div>
  </a>

  <a class="nav-item small-item" [routerLink]="Routing.CHANGE_PASSWORD.path"
    [ngClass]="Routing.CHANGE_PASSWORD.path == path ? 'selected' : ''"
    *ngIf="AuthService.CurrentStatus == AuthStatus.LoggedIn" (click)="opened = false">
    <div class="text">Đổi mật khẩu</div>
    <div class="under-line"></div>
  </a>

  <a class="nav-item small-item" [routerLink]="Routing.LOGIN.path"
    [ngClass]="Routing.LOGIN.path == path ? 'selected' : ''" *ngIf="AuthService.CurrentStatus != AuthStatus.LoggedIn"
    (click)="opened = false">
    <div class="text">Đăng nhập</div>
    <div class="under-line"></div>
  </a>

  <a class="nav-item small-item" [routerLink]="Routing.REGISTER.path"
    [ngClass]="Routing.REGISTER.path == path ? 'selected' : ''" *ngIf="AuthService.CurrentStatus != AuthStatus.LoggedIn"
    (click)="opened = false">
    <div class="text">Đăng ký</div>
    <div class="under-line"></div>
  </a>

  <div class="amc-item small-item logout" (click)="logout()" *ngIf="AuthService.CurrentStatus == AuthStatus.LoggedIn">
    <div class="icon"></div>
    <div class="text">Đăng xuất</div>
  </div>
</ng-template>
